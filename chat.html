<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShadowGPT | Cid Kageno</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Feather Icons -->
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: { violet: { 500: '#8b5cf6' } }
    }
  }
}
</script>

<style>
body { margin:0; font-family: sans-serif; }
.glass {
  background: rgba(30,30,30,0.6);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.dot-flashing {
  width: 8px; height: 8px; border-radius: 50%;
  background-color: #8b5cf6;
  animation: dotFlashing 1s infinite linear alternate;
}
@keyframes dotFlashing { 0%{background-color:#8b5cf6}50%,100%{background-color:transparent} }
.animate-fadeIn { animation: fadeIn 0.3s ease forwards; }
@keyframes fadeIn { 0%{opacity:0;transform:translateY(5px);} 100%{opacity:1;transform:translateY(0);} }
</style>
</head>

<body class="bg-black text-white min-h-screen flex flex-col">

<!-- Header -->
<header class="p-4 text-center text-2xl font-bold">ShadowGPT Portal</header>

<!-- Chat Container -->
<main class="flex-1 container mx-auto px-4 py-4 flex flex-col">
  <div id="chat-container" class="flex-1 mb-4 overflow-y-auto space-y-4 p-4 bg-gray-900 rounded-xl">
    <div class="flex justify-start">
      <div class="bg-violet-500/20 rounded-tr-xl rounded-br-xl rounded-bl-xl p-4 max-w-xs md:max-w-md">
        <p class="text-sm">Greetings, shadow walker. What knowledge do you seek from the void?</p>
      </div>
    </div>
  </div>

  <!-- Input Bar -->
  <div class="flex gap-2">
    <input type="text" id="user-input" placeholder="Whisper to the shadows..."
      class="flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500">
    <button id="send-btn" class="px-6 py-3 bg-violet-600 hover:bg-violet-700 rounded-lg font-medium flex items-center gap-2">
      <i data-feather="send"></i>
      <span>Send</span>
    </button>
  </div>
</main>

<!-- Footer -->
<footer class="text-center p-4 text-sm opacity-60">
  Â© All rights reserved by Cid Kageno
</footer>

<script>
feather.replace();

const chatContainer = document.getElementById('chat-container');
const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');

const API_URL = "https://noobs-api.top/dipto/baby";

// AI query function
async function queryAI(message, userID="user123") {
  try {
    const res = await fetch(`${API_URL}?text=${encodeURIComponent(message)}&senderID=${userID}`);
    const data = await res.json();
    return data.reply || "The shadows are silent...";
  } catch(err) {
    console.error(err);
    return "The shadows are disturbed... try again later.";
  }
}

// Typing effect
function typeWriter(element, text, speed=50, callback) {
  let i=0;
  const interval = setInterval(() => {
    element.textContent = text.slice(0,i+1) + (i < text.length-1 ? '|' : '');
    chatContainer.scrollTop = chatContainer.scrollHeight;
    i++;
    if(i===text.length){
      clearInterval(interval);
      element.textContent = text;
      if(callback) callback();
    }
  }, speed);
}

// Add message to chat
function addMessage(sender, message, animateTyping=false){
  const messageDiv = document.createElement('div');
  messageDiv.className = `flex ${sender==='user'?'justify-end':'justify-start'} animate-fadeIn`;
  const bubbleDiv = document.createElement('div');
  bubbleDiv.className = sender==='user'
    ? 'bg-violet-500 rounded-tl-xl rounded-tr-none rounded-br-xl rounded-bl-xl p-4 max-w-xs md:max-w-md'
    : 'bg-violet-500/20 rounded-tl-none rounded-tr-xl rounded-br-xl rounded-bl-xl p-4 max-w-xs md:max-w-md';
  const p = document.createElement('p');
  p.className='text-sm';
  bubbleDiv.appendChild(p);
  messageDiv.appendChild(bubbleDiv);
  chatContainer.appendChild(messageDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;
  if(animateTyping) typeWriter(p, message);
  else p.textContent = message;
}

// Send message handler
async function sendMessage(){
  const message = userInput.value.trim();
  if(!message) return;
  addMessage('user', message);
  userInput.value='';

  const thinkingDiv = document.createElement('div');
  thinkingDiv.className='flex justify-start animate-fadeIn';
  thinkingDiv.innerHTML=`
    <div class="rounded-tl-none rounded-tr-xl rounded-br-xl rounded-bl-xl p-4 max-w-xs md:max-w-md bg-violet-500/20 flex gap-2">
      <div class="dot-flashing"></div>
    </div>
  `;
  chatContainer.appendChild(thinkingDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;

  const response = await queryAI(message);
  chatContainer.removeChild(thinkingDiv);
  addMessage('bot', response, true);
}

sendBtn.addEventListener('click', sendMessage);
userInput.addEventListener('keypress', e => { if(e.key==='Enter') sendMessage(); });
</script>
</body>
</html>
